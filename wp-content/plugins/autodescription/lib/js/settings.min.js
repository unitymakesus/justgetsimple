'use strict';window.tsfSettings=function(a){const b="undefined"!=typeof tsfSettingsL10n&&tsfSettingsL10n,c=()=>{const b=b=>{a(b.target).is(":checked")?(a(".tsf-pixel-counter-wrap").show(),tsfC.triggerCounterUpdate()):a(".tsf-pixel-counter-wrap").hide()};a("#autodescription-site-settings\\[display_character_counter\\]").on("click",b),a("#autodescription-site-settings\\[display_pixel_counter\\]").on("click",b);const c=wp.template("tsf-disabled-post-type-help")(),d=wp.template("tsf-disabled-taxonomy-help")(),e=wp.template("tsf-disabled-taxonomy-from-pt-help")(),f=a=>tsf.escapeString("tsf-disabled-post-type-input-clone-"+a),g=a=>tsf.escapeString("tsf-disabled-taxonomy-input-clone-"+a),h=a=>[document.getElementById("autodescription-site-settings[noindex_post_types]["+a+"]"),document.getElementById("autodescription-site-settings[nofollow_post_types]["+a+"]"),document.getElementById("autodescription-site-settings[noarchive_post_types]["+a+"]")].filter(a=>a),i=a=>[document.getElementById("autodescription-site-settings[noindex_taxonomies]["+a+"]"),document.getElementById("autodescription-site-settings[nofollow_taxonomies]["+a+"]"),document.getElementById("autodescription-site-settings[noarchive_taxonomies]["+a+"]")].filter(a=>a),j=(b,d)=>{d?(h(b).forEach(d=>{if(d){let e=d.cloneNode(!0);e.type="hidden",e.value=d.checked?d.value:"",e.id+="-cloned",e.classList.add(f(b)),d.disabled=!0,d.dataset.hasWarning=1,a(d.closest("label")).append(c).append(e)}}),tsfTT.triggerReset()):h(b).forEach(a=>{a&&a.dataset.hasWarning&&(a.closest("label").querySelector(".tsf-post-type-warning").remove(),document.querySelectorAll("."+f(b)).forEach(a=>{a.remove()}),a.disabled=!1,a.dataset.hasWarning="")})},k=(b,c)=>{c?(i(b).forEach(c=>{if(c){let e=c.cloneNode(!0);e.type="hidden",e.value=c.checked?c.value:"",e.id+="-cloned",e.classList.add(g(b)),c.disabled=!0,c.dataset.hasWarning=1,a(c.closest("label")).append(d).append(e)}}),tsfTT.triggerReset()):i(b).forEach(a=>{a&&a.dataset.hasWarning&&(a.closest("label").querySelector(".tsf-taxonomy-warning").remove(),document.querySelectorAll("."+g(b)).forEach(a=>{a.remove()}),a.disabled=!1,a.dataset.hasWarning="")})},l=(b,c)=>{let d=document.getElementById("autodescription-site-settings[disabled_taxonomies]["+b+"]");c?(a(d.closest("label")).append(e),tsfTT.triggerReset()):d.closest("label").querySelector(".tsf-taxonomy-from-pt-warning").remove()};let m=new Set,n=new Set,o=new Set,p=new Set;const q=()=>{let a=document.querySelectorAll(".tsf-disabled-taxonomies"),b=!1;a.forEach(a=>{let c=a.name.split(/(?:.+\[)(.+?)(?:])/).join(""),d=JSON.parse(a.dataset.postTypes),e=d.every(a=>m.has(a));e?(!p.has(c)&&(b=!0),p.add(c)):p.has(c)&&(p.delete(c),b=!0),b&&t(c)})};let r=new Map;const s=a=>r.get(a)||new Set;a(window).on("tsf-post-type-support-changed",(a,b)=>{j(b,m.has(b)),q()}),a(window).on("tsf-taxonomy-support-changed",(a,b)=>{s("disabledTaxonomiesAll").size!==o.size&&k(b,o.has(b)),s("disabledPtTaxonomies").size!==p.size&&l(b,p.has(b)),r.set("disabledTaxonomiesAll",new Set(o)),r.set("disabledTaxonomies",new Set(n)),r.set("disabledPtTaxonomies",new Set(p))});const t=b=>{o.clear(),n.forEach(a=>o.add(a)),p.forEach(a=>o.add(a)),a(window).trigger("tsf-taxonomy-support-changed",[b,o,n,p])};let u=!1;const v=b=>{if(b.target.name){let c=b.target.name.split(/(?:.+\[)(.+?)(?:])/).join("");a(b.target).is(":checked")?(m.add(c),a(window).trigger("tsf-post-type-support-changed",[c,m])):u&&(m.delete(c),a(window).trigger("tsf-post-type-support-changed",[c,m]))}},w=b=>{if(b.target.name){let c=b.target.name.split(/(?:.+\[)(.+?)(?:])/).join("");a(b.target).is(":checked")?(n.add(c),t(c)):u&&(n.delete(c),t(c))}};a(".tsf-disabled-post-types").on("change.tsfSetPostType",v).trigger("change.tsfSetPostType"),a(".tsf-disabled-taxonomies").on("change.tsfSetTaxonomy",w).trigger("change.tsfSetTaxonomy"),u=!0},d=()=>{let b=a(".tsf-color-picker");b.length&&a.each(b,(b,c)=>{let d=a(c),e="",f=d.data("tsf-default-color");d.wpColorPicker({defaultColor:f,width:238,change:()=>{e=d.wpColorPicker("color"),""===e&&(e=f),d.val(e),tsfAys.registerChange()},clear:()=>{f.length&&(d.val(f),d.closest(".wp-picker-container").find(".wp-color-result").css("backgroundColor",f)),tsfAys.registerChange()},palettes:!1})})},e=()=>{const b=document.getElementById("autodescription-site-settings[title_rem_additions]"),c=document.getElementById("autodescription-site-settings[social_title_rem_additions]"),d=wp.template("tsf-disabled-title-additions-help")();a(b).on("change.tsfSetAdditions",()=>{let e=a(".tsf-title-additions-js");a(b).is(":checked")?(e.css("display","none"),c&&(c.dataset.hasWarning=1,a(c.closest("label")).append(d),tsfTT.triggerReset())):(e.css("display","inline"),c&&c.dataset.hasWarning&&c.closest("label").querySelector(".tsf-title-additions-warning").remove())}).trigger("change.tsfSetAdditions");a("#tsf-title-location input").on("click",b=>{let c=a(".tsf-title-additions-example-left"),d=a(".tsf-title-additions-example-right");"right"===a(b.target).val()?(c.css("display","none"),d.css("display","inline")):(c.css("display","inline"),d.css("display","none"))});a("#tsf-title-prefixes-toggle :input").on("click",b=>{let c=a(b.target),d=a(".tsf-title-prefix-example");c.is(":checked")?d.css("display","none"):d.css("display","inline")});a("#tsf-title-separator :input").on("click",b=>{let c=tsf.decodeEntities(b.target.dataset.entity),d="tsf-title-separator-active";a(".tsf-sep-js").text(` ${c} `),a(window).trigger("tsf-title-sep-updated",[c]);let e=document.querySelector(`.${d}`);e&&e.classList.remove(d,"tsf-no-focus-ring");let f=document.querySelector(`label[for="${b.target.id}"]`);f&&f.classList.add(d)});a("#tsf-title-separator label").on("click",a=>{a.target.classList.add("tsf-no-focus-ring")})},f=()=>{const c="autodescription-site-settings[homepage_title]",d=document.getElementById(c),e=document.getElementById("autodescription-site-settings[homepage_title_tagline]"),f=document.getElementById("autodescription-site-settings[homepage_tagline]");tsfTitle.setInputElement(d);let g=JSON.parse(document.getElementById("tsf-title-data_"+c).dataset.state);tsfTitle.updateStateOf(c,"allowReferenceChange",!g.refTitleLocked),tsfTitle.updateStateOf(c,"defaultTitle",g.defaultTitle.trim()),tsfTitle.updateStateOf(c,"addAdditions",g.addAdditions),tsfTitle.updateStateOf(c,"useSocialTagline",!!(g.useSocialTagline||!1)),tsfTitle.updateStateOf(c,"additionValue",g.additionValue.trim()),tsfTitle.updateStateOf(c,"additionPlacement",g.additionPlacement),tsfTitle.updateStateOf(c,"hasLegacy",!!(g.hasLegacy||!1)),tsfTitle.enqueueUnregisteredInputTrigger(c);const h=()=>{let b=tsfTitle.getStateOf(c,"additionPlacement"),d="after";"left"===a("#tsf-home-title-location input:checked").val()&&(d="before"),d!==b&&tsfTitle.updateStateOf(c,"additionPlacement",d)};h(),a("#tsf-home-title-location").on("click",":input",h);const i=a=>{let b=tsfTitle.getStateOf(c,"prefixValue"),d="";switch(a){case"password":d=tsfTitle.protectedPrefix;break;case"private":d=tsfTitle.privatePrefix;break;default:case"public":d="";}d!==b&&tsfTitle.updateStateOf(c,"prefixValue",d)};b.states.isFrontPrivate?i("private"):b.states.isFrontProtected&&i("password");a(d).on("input.tsfInputTitle",b=>{let d=a(".tsf-custom-title-js"),e=tsf.decodeEntities(tsf.sDoubleSpace(b.target.value.trim()));e.length?d.html(tsf.escapeString(e)):d.html(tsf.escapeString(tsf.decodeEntities(tsfTitle.getStateOf(c,"defaultTitle"))))}).trigger("input.tsfInputTitle");let j,k=a(".tsf-custom-tagline-js");const l=()=>{clearTimeout(j),j=setTimeout(()=>{let b=tsfTitle.getStateOf(c,"additionValue");b=tsf.decodeEntities(tsf.sDoubleSpace(b.trim())),b.length&&tsfTitle.getStateOf(c,"addAdditions")?(k.html(tsf.escapeString(b)),a(".tsf-custom-blogname-js").show()):a(".tsf-custom-blogname-js").hide()})};a(e).on("input.tsfInputTagline",()=>{let a=tsfTitle.getStateOf(c,"additionValue"),b=e.value.trim();b.length||(b=e.placeholder||""),b=tsf.escapeString(tsf.decodeEntities(b.trim())),a!==b&&(tsfTitle.updateStateOf(c,"additionValue",b),l())}).trigger("input.tsfInputTagline");a(f).on("change.tsfToggleTagline",a=>{let b=!1;a.target.checked?(b=!0,e.readOnly=!1):(b=!1,e.readOnly=!0),tsfTitle.updateStateOf(c,"addAdditions",b),l()}).trigger("change.tsfToggleTagline");a(window).on("tsf-title-sep-updated",(a,b)=>{tsfTitle.updateStateAll("separator",b)})},g=()=>{const a="autodescription-site-settings[homepage_description]";let b=JSON.parse(document.getElementById("tsf-description-data_"+a).dataset.state);tsfDescription.setInputElement(document.getElementById(a)),tsfDescription.updateStateOf(a,"defaultDescription",b.defaultDescription.trim()),tsfDescription.updateStateOf(a,"hasLegacy",!!(b.hasLegacy||!1)),tsfDescription.enqueueUnregisteredInputTrigger(a)},h=()=>{const b=()=>{tsfTitle.enqueueUnregisteredInputTrigger("autodescription-site-settings[homepage_title]"),tsfDescription.enqueueUnregisteredInputTrigger("autodescription-site-settings[homepage_description]")};a(document).on("postbox-toggled",function(a,c){if("autodescription-homepage-settings"===c.id){let a=c.querySelector(".inside");0<a.offsetHeight&&0<a.offsetWidth&&b()}}),a("#tsf-homepage-tab-general").on("tsf-tab-toggled",b)},i=()=>{const b=document.getElementById("autodescription-site-settings[social_title_rem_additions]");a(b).on("change.tsfSetAdditions",()=>{a(b).is(":checked")?tsfTitle.updateStateAll("useSocialTagline",!1):tsfTitle.updateStateAll("useSocialTagline",!0)})},j=()=>{const b=a("#autodescription-site-settings\\[set_copyright_directives\\]"),c=a(["#autodescription-site-settings\\[max_snippet_length\\]","#autodescription-site-settings\\[max_image_preview\\]","#autodescription-site-settings\\[max_video_preview\\]"].join(", "));if(b.length&&c.length){b.on("change.tsfToggleDirectives",b=>{b.target.checked?(c.prop("disabled",!1),a(".tsf-toggle-directives-surrogate").remove()):(c.prop("disabled",!0),c.each((b,c)=>{a("<input />").attr("type","hidden").attr("name",c.name||"").val(c.value||0).addClass("tsf-toggle-directives-surrogate").insertAfter(c)}))}),b.trigger("change.tsfToggleDirectives")}},k=()=>{const b=a(["#autodescription-site-settings\\[google_verification\\]","#autodescription-site-settings\\[bing_verification\\]","#autodescription-site-settings\\[yandex_verification\\]","#autodescription-site-settings\\[baidu_verification\\]","#autodescription-site-settings\\[pint_verification\\]"].join(", "));if(b.length){const a=a=>{let b=a.originalEvent.clipboardData&&a.originalEvent.clipboardData.getData("text")||void 0;if(b){let c=/<meta[^>]+content=(\"|\')?([^\"\'>\s]+)\1?.*?>/i.exec(b);c&&2 in c&&"string"==typeof c[2]&&c[2].length&&(a.stopPropagation(),a.preventDefault(),a.target.value=c[2],tsfAys.registerChange())}};b.on("paste",a)}},l=()=>{c(),e(),f(),g(),h(),i(),j(),k(),d()},m=()=>{const a="autodescription-site-settings[homepage_title]",b="autodescription-site-settings[homepage_description]";tsfSocial.initTitleInputs({ref:document.getElementById("tsf-title-reference_"+a),refNa:document.getElementById("tsf-title-noadditions-reference_"+a),meta:document.getElementById(a),og:document.getElementById("autodescription-site-settings[homepage_og_title]"),tw:document.getElementById("autodescription-site-settings[homepage_twitter_title]")}),tsfSocial.initDescriptionInputs({ref:document.getElementById("tsf-description-reference_"+b),meta:document.getElementById(b),og:document.getElementById("autodescription-site-settings[homepage_og_description]"),tw:document.getElementById("autodescription-site-settings[homepage_twitter_description]")})},n=()=>{let b={},c={},d={},e={};a(".tsf-tabs-radio").on("change",(f,g)=>{const h=a(f.target);if(!h.is(":checked"))return;g="boolean"==typeof g&&g;const i=f.target.id,j=f.target.name;d.hasOwnProperty(j)||(d[j]=h.closest(".tsf-nav-tab-wrapper"));const k="tsf-active-tab-content",l="tsf-tab-active",m=a(`.${k}`),n=d[j].find(`.${l}`);if(!g){const a=m.find("input:invalid, select:invalid, textarea:invalid");if(a.length)return a[0].reportValidity(),n.prop("checked",!0),h.prop("checked",!1),f.stopPropagation(),f.preventDefault(),!1}if(n.removeClass(l),n.siblings("label").removeClass("tsf-no-focus-ring"),h.addClass(l),g){const b=document.getElementById(`${i}-content`);if(!b.classList.contains(k)){const a=document.querySelectorAll(`.${j}-content`);a&&a.forEach(a=>{a.classList.remove(k)}),b&&b.classList.add(k)}a(`#${i}`).trigger("tsf-tab-toggled")}else{e.hasOwnProperty(j)||(e[j]=h.closest(".inside"),b[j]=void 0);const d=150;if(c[j]=i,"undefined"!=typeof b[j])return;const f=a("."+j+"-content"),g=()=>(a(`#${c[j]}-content`).stop(!1,!0).addClass(k).fadeIn(250),e[j].css("minHeight",""),new Promise(a=>setTimeout(a,d))),l=()=>{e[j].css("minHeight",e[j].height())};b[j]=()=>new Promise(b=>{l(),a.when(f.stop(!1,!0).fadeOut(d)).then(()=>{f.removeClass(k),b()})}).then(g).then(()=>{let d=document.getElementById(`${c[j]}-content`);!d||d.classList.contains(k)?(a(`#${c[j]}`).trigger("tsf-tab-toggled"),b[j]=void 0):(l(),f.removeClass(k),b[j]())}),b[j]()}});a(".tsf-nav-tab-wrapper").on("click.tsfNavTab",".tsf-nav-tab",a=>{a.currentTarget.classList.add("tsf-no-focus-ring")});const f=()=>{window.removeEventListener("load",f),a(".tsf-tabs-radio:checked").each((b,c)=>{a(c).trigger("change",[!0])})};window.addEventListener("load",f)};return Object.assign({load:()=>{a("div.updated, div.error, div.notice, .notice-error, .notice-warning, .notice-info").insertAfter(".wp-header-end"),document.body.addEventListener("tsf-onload",l),document.body.addEventListener("tsf-ready",m),n()}},{},{l10n:b})}(jQuery),window.tsfSettings.load();
