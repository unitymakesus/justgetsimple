'use strict';window.tsfDescription=function(a){const b="undefined"!=typeof tsfDescriptionL10n&&tsfDescriptionL10n,c=new Map;let d={};let e;const f=()=>{if(e)return e;for(const a of c.keys())if(g(a,"hasLegacy"))return e=a},g=(a,b)=>b?b in d[a]?d[a][b]:void 0:d[a],h=(a,b,c)=>{if(a in d)switch(d[a][b]=c,b){case"allowReferenceChange":case"defaultDescription":default:s(a);}},i=a=>{let b=[document.getElementById("tsf-description-reference_"+a)];if(g(a,"hasLegacy")){let a=document.getElementById("tsf-description-reference");a&&b.unshift(a)}return b},j=b=>{let c=i(b.target.id);if(!c[0])return;let d=g(b.target.id,"allowReferenceChange"),e=d&&b.target.value||g(b.target.id,"defaultDescription")||"",f=tsf.escapeString(tsf.decodeEntities(tsf.sDoubleSpace(e.trim())));c.forEach(b=>{b.innerHTML=f,setTimeout(()=>{a(b).change()},0)})},k=a=>{a.target.placeholder=i(a.target.id)[0].innerText},l=a=>{if("tsfC"in window){let b=document.getElementById(a.target.id+"_chars"),c=i(a.target.id)[0];b&&tsfC.updateCharacterCounter({e:b,text:c.innerHTML,field:"description",type:"search"})}},m=a=>{if("tsfC"in window){let b=document.getElementById(a.target.id+"_pixels"),c=i(a.target.id)[0];b&&tsfC.updatePixelCounter({e:b,text:c.innerHTML,field:"description",type:"search"})}},n=b=>{b?a(c.get(b)).trigger("input.tsfUpdateDescriptions"):c.forEach(a=>a.id&&n(a.id))},o=b=>{b?a(c.get(b)).trigger("tsf-update-description-counter"):c.forEach(a=>a.id&&o(a.id))},p=a=>{j(a),k(a),q(a)},q=a=>{l(a),m(a)};let r={};const s=a=>{a in r&&clearTimeout(r[a]),r[a]=setTimeout(n,10)},t=a=>{if("tsfAys"in window){let b=tsfAys.getChangedState;n(a),b||tsfAys.reset()}else n(a)};let u={};const v=a=>{a in u&&clearTimeout(u[a]),u[a]=setTimeout(()=>t(a),10)};let w=window.innerWidth;const x=()=>{let a=window.innerWidth;w<a?782>=w&&782<=a&&t():782<=w&&782>=a&&t(),w=a},y=()=>{a(document).on("wp-window-resized",x),window.addEventListener("tsf-counter-updated",s)},z=b=>{!b instanceof Element||(a(b).off("input.tsfUpdateDescriptions",p).on("input.tsfUpdateDescriptions",p),a(b).off("tsf-update-description-counter",q).on("tsf-update-description-counter",q),v(b.id))};return Object.assign({load:()=>{document.body.addEventListener("tsf-onload",y)}},{setInputElement:a=>(c.set(a.id,a),d[a.id]={allowReferenceChange:!0,defaultDescription:""},z(a),c.get(a.id)),getInputElement:a=>c.get(a),getState:a=>(tsf.deprecatedFunc("tsfDescription.getState()","4.1.0","tsfDescription.getStateOf()"),g(f(),a)),getStateOf:g,updateState:(a,b)=>(tsf.deprecatedFunc("tsfDescription.updateState()","4.1.0","tsfDescription.updateStateOf()"),h(f(),a,b)),updateStateOf:h,updateStateAll:(a,b)=>{c.forEach(c=>{h(c.id,a,b)})},triggerCounter:o,triggerInput:n,enqueueTriggerInput:s,triggerUnregisteredInput:t,enqueueUnregisteredInputTrigger:v},{l10n:b})}(jQuery),window.tsfDescription.load();
